- command: 'toolkit:hooks-enable'
  configuration: []
  expectations:
    - contains: |
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->copy('tk/resources/git/hooks/pre-commit', 'tk/tests/sandbox/.git/hooks/pre-commit')
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->chmod('tk/tests/sandbox/.git/hooks/pre-commit', 493, 0, )
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->copy('tk/resources/git/hooks/prepare-commit-msg', 'tk/tests/sandbox/.gi ... /prepare-commit-msg')
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->chmod('tk/tests/sandbox/.gi ... /prepare-commit-msg', 493, 0, )
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->copy('tk/resources/git/hooks/pre-push', 'tk/tests/sandbox/.git/hooks/pre-push')
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->chmod('tk/tests/sandbox/.git/hooks/pre-push', 493, 0, )

- command: 'toolkit:hooks-enable --hooks=pre-commit'
  configuration: []
  expectations:
    - contains: |
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->copy('tk/resources/git/hooks/pre-commit', 'tk/tests/sandbox/.git/hooks/pre-commit')
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->chmod('tk/tests/sandbox/.git/hooks/pre-commit', 493, 0, )

- command: 'toolkit:hooks-disable'
  configuration: []
  expectations:
    - contains: |
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->remove('tk/tests/sandbox/.git/hooks/pre-commit')
        >  The hook 'prepare-commit-msg' was not found, skipping.
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->remove('tk/tests/sandbox/.git/hooks/pre-push')

- command: 'toolkit:hooks-disable --hooks=pre-commit'
  configuration: []
  expectations:
    - contains: |
        [Simulator] Simulating Filesystem\FilesystemStack()
          ->remove('tk/tests/sandbox/.git/hooks/pre-commit')

- command: 'toolkit:hooks-delete-all'
  configuration: []
  expectations:
    - contains: |
        >  The hook pre-commit was deleted.
        >  The hook pre-push was deleted.

- command: 'toolkit:hooks-list'
  configuration:
    toolkit:
      project_id: toolkit
  expectations:
    - contains: |
        +------------------------------+------------------+-------------+---------------+
        | Hook                         | Active by config | Hook exists | Modified file |
        +------------------------------+------------------+-------------+---------------+
        | pre-commit (toolkit)         | Yes              | Yes         | Yes           |
        | pre-push (toolkit)           | Yes              | Yes         | Yes           |
        | prepare-commit-msg (toolkit) | Yes              | No          | No            |
        +------------------------------+------------------+-------------+---------------+

- command: 'toolkit:hooks-run'
  configuration: []
  expectations:
    - contains: |
        Not enough arguments (missing: "hook").


        toolkit:hooks-run <hook> [<arg1> [<arg2> [<arg3>]]]
